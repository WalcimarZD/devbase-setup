# Code (20-29)

> Ãrea de cÃ³digo fonte - Clean Architecture + DDD

## ğŸ¯ PropÃ³sito

A Ã¡rea CODE contÃ©m todo o cÃ³digo fonte dos seus projetos. EstÃ¡ organizada para suportar:
- **Monorepos** - MÃºltiplos projetos relacionados
- **Packages compartilhados** - Bibliotecas reutilizÃ¡veis
- **Templates** - Estrutura padrÃ£o para novos projetos

## ğŸ“ Estrutura

```
20-29_CODE/
â”œâ”€â”€ 21_monorepo_apps/       # AplicaÃ§Ãµes principais
â”‚   â”œâ”€â”€ my-app/             # Exemplo de aplicaÃ§Ã£o
â”‚   â””â”€â”€ another-app/        # Outra aplicaÃ§Ã£o
â”‚
â”œâ”€â”€ 22_monorepo_packages/   # Bibliotecas compartilhadas
â”‚   â”œâ”€â”€ shared-types/       # Tipos TypeScript compartilhados
â”‚   â”œâ”€â”€ shared-utils/       # UtilitÃ¡rios comuns
â”‚   â””â”€â”€ ui-components/      # Componentes de UI reutilizÃ¡veis
â”‚
â”œâ”€â”€ 23_worktrees/           # Git worktrees para branches paralelas
â”‚   â””â”€â”€ feature-x/          # Worktree para feature especÃ­fica
â”‚
â””â”€â”€ __template-clean-arch/  # Template para novos projetos
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ domain/
    â”‚   â”œâ”€â”€ application/
    â”‚   â”œâ”€â”€ infrastructure/
    â”‚   â””â”€â”€ presentation/
    â””â”€â”€ README.md
```

## ğŸš€ Criar Novo Projeto

### Via CLI (recomendado)
```powershell
# Cria projeto a partir do template
devbase new -Name meu-projeto

# Com opÃ§Ãµes
devbase new -Name meu-projeto -Template clean-arch -Language typescript
```

### Manualmente
```powershell
# Copiar template
Copy-Item -Recurse __template-clean-arch 21_monorepo_apps/meu-projeto

# Renomear placeholders
# Substituir {{PROJECT_NAME}} pelo nome real no cÃ³digo
```

## ğŸ—ï¸ Clean Architecture

O template segue **Clean Architecture** (tambÃ©m conhecida como Onion Architecture ou Hexagonal):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PRESENTATION                    â”‚
â”‚         (Controllers, Views, API)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              APPLICATION                     â”‚
â”‚        (Use Cases, DTOs, Services)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 DOMAIN                       â”‚
â”‚    (Entities, Value Objects, Interfaces)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             INFRASTRUCTURE                   â”‚
â”‚      (Database, APIs, File System)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Regra de DependÃªncia
**DependÃªncias apontam PARA DENTRO:**
- âœ… Infrastructure â†’ Domain
- âœ… Application â†’ Domain  
- âœ… Presentation â†’ Application
- âŒ Domain â†’ Infrastructure (NUNCA!)

### Camadas

| Camada | ConteÃºdo | Exemplo |
|--------|----------|---------|
| **Domain** | Entidades, Value Objects, Interfaces de Repository | `User`, `Email`, `IUserRepository` |
| **Application** | Use Cases, DTOs, Services de aplicaÃ§Ã£o | `CreateUserUseCase`, `UserDTO` |
| **Infrastructure** | ImplementaÃ§Ãµes, Database, APIs externas | `SqlUserRepository`, `EmailService` |
| **Presentation** | Controllers, Views, Endpoints de API | `UserController`, `UserView` |

## ğŸ“¦ Git Worktrees

Worktrees permitem trabalhar em mÃºltiplas branches simultaneamente sem trocar de branch:

```bash
# Criar worktree para uma feature
git worktree add ../23_worktrees/feature-auth feature/auth

# Listar worktrees
git worktree list

# Remover worktree
git worktree remove ../23_worktrees/feature-auth
```

**Quando usar:**
- Code review enquanto trabalha em outra feature
- Testar branch de produÃ§Ã£o sem perder contexto local
- Comparar implementaÃ§Ãµes side-by-side

## ğŸ“ ConvenÃ§Ãµes

### Nomenclatura de Arquivos
- **kebab-case** para arquivos e pastas: `user-repository.ts`
- ExceÃ§Ã£o: Classes seguem PascalCase no cÃ³digo interno

### Commits
Siga [Conventional Commits](../05_templates/patterns/padroes-git.md):
```bash
feat(user): add email validation
fix(auth): resolve token refresh issue
```

### Testes
```
src/
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ user.ts
â””â”€â”€ domain/__tests__/
    â””â”€â”€ user.test.ts
```

## ğŸ“š DocumentaÃ§Ã£o Adicional

- [Template Clean Architecture](__template-clean-arch/README.md)
- [Git Patterns](../05_templates/patterns/padroes-git.md)
- [System Prompt para Dev](../05_templates/prompts/system-prompt-dev.md)
