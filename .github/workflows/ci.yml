name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest]

    steps:
      - uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install Python deps (Linux)
        if: runner.os == 'Linux'
        shell: bash
        run: |
          python -m pip install --upgrade pip
          if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

      - name: Run pre-commit & linters (Linux)
        if: runner.os == 'Linux'
        shell: bash
        run: |
          python -m pip install pre-commit
          pre-commit run --all-files
          pytest -q

      - name: Windows: Install Python deps and run pre-commit/tests
        if: runner.os == 'Windows'
        shell: pwsh
        run: |
          python -m pip install --upgrade pip
          if (Test-Path requirements.txt) { pip install -r requirements.txt }
          pip install pre-commit
          pre-commit run --all-files
          pytest -q

      - name: Node: install & test (if present)
        if: runner.os == 'Linux'
        uses: actions/setup-node@v4
        with:
          node-version: '18'
        shell: bash
        run: |
          if [ -f package.json ]; then npm ci || npm install; if jq -e '.scripts.test' package.json >/dev/null 2>&1; then npm test; fi; if jq -e '.scripts.lint' package.json >/dev/null 2>&1; then npm run lint; fi; else echo "no package.json"; fi
name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest]

    steps:
      - uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install Python deps (Linux)
        if: runner.os == 'Linux'
        shell: bash
        run: |
          python -m pip install --upgrade pip
          if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

      - name: Run pre-commit & linters (Linux)
        if: runner.os == 'Linux'
        shell: bash
        run: |
          python -m pip install pre-commit
          pre-commit run --all-files
          pytest -q

      - name: Windows: Install Python deps and run pre-commit/tests
        if: runner.os == 'Windows'
        shell: pwsh
        run: |
          python -m pip install --upgrade pip
          if (Test-Path requirements.txt) { pip install -r requirements.txt }
          pip install pre-commit
          pre-commit run --all-files
          pytest -q

      - name: Node: install & test (if present)
        if: runner.os == 'Linux'
        uses: actions/setup-node@v4
        with:
          node-version: '18'
        shell: bash
        run: |
          if [ -f package.json ]; then npm ci || npm install; if jq -e '.scripts.test' package.json >/dev/null 2>&1; then npm test; fi; if jq -e '.scripts.lint' package.json >/dev/null 2>&1; then npm run lint; fi; else echo "no package.json"; fi
name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest]

    steps:
      - uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install Python deps
        if: runner.os == 'Linux'
        shell: bash
        run: |
          python -m pip install --upgrade pip
          if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

      - name: Run pre-commit & linters (Linux)
        if: runner.os == 'Linux'
        shell: bash
        run: |
          python -m pip install pre-commit
          pre-commit run --all-files
          pytest -q

      - name: Windows: Install Python deps and run pre-commit/tests
        if: runner.os == 'Windows'
        shell: pwsh
        run: |
          python -m pip install --upgrade pip
          if (Test-Path requirements.txt) { pip install -r requirements.txt }
          pip install pre-commit
          pre-commit run --all-files
          pytest -q

      - name: Node: install & test (if present)
        if: runner.os == 'Linux'
        uses: actions/setup-node@v4
        with:
          node-version: '18'
        shell: bash
        run: |
          if [ -f package.json ]; then npm ci || npm install; if jq -e '.scripts.test' package.json >/dev/null 2>&1; then npm test; fi; if jq -e '.scripts.lint' package.json >/dev/null 2>&1; then npm run lint; fi; else echo "no package.json"; fi
 name: CI

 on:
   push:
     branches: [ main ]
   pull_request:
     branches: [ main ]

 jobs:
   build:
     runs-on: ${{ matrix.os }}
     strategy:
       matrix:
         os: [ubuntu-latest, windows-latest]

     steps:
       - uses: actions/checkout@v4

       - name: Set up Python
         uses: actions/setup-python@v4
         with:
           python-version: '3.x'

       - name: Install Python deps
         shell: bash
         run: |
           python -m pip install --upgrade pip
           if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
        if: "runner.os == 'Linux'"

       - name: Run pre-commit & linters (Linux)
         shell: bash
         run: |
           python -m pip install pre-commit
           pre-commit run --all-files
           pytest -q
        if: "runner.os == 'Linux'"

       - name: Windows: Install Python deps and run pre-commit/tests
        if: "runner.os == 'Windows'"
         shell: pwsh
         run: |
           python -m pip install --upgrade pip
           if (Test-Path requirements.txt) { pip install -r requirements.txt }
           pip install pre-commit
           pre-commit run --all-files
           pytest -q

       - name: Node: install & test (if present)
         uses: actions/setup-node@v4
         with:
           node-version: '18'
         run: |
           if [ -f package.json ]; then npm ci || npm install; if jq -e '.scripts.test' package.json >/dev/null 2>&1; then npm test; fi; if jq -e '.scripts.lint' package.json >/dev/null 2>&1; then npm run lint; fi; else echo "no package.json"; fi
         shell: bash
        if: "runner.os == 'Linux'"
